# 手势控制AirSim无人机系统

## 项目简介

基于计算机视觉和语音反馈技术的手势控制无人机系统。使用OpenCV实现手部检测和手势识别，结合语音反馈系统，提供直观的无人机控制体验。系统支持AirSim仿真环境和真实无人机控制，具备手势平滑处理、状态追踪、性能监控和轨迹记录等完整功能。

## 核心功能

### 1. 增强手势识别与控制
- **OpenCV实现**：不依赖深度学习框架，使用肤色检测、轮廓分析和凸缺陷检测识别手势
- **多种手势支持**：支持停止、前进、上升、下降、左转、右转、悬停等多种控制手势
- **智能手势平滑**：使用手势稳定性检测和位置平滑算法，减少误判和抖动
- **实时状态追踪**：跟踪手势生命周期（开始/活跃/结束），提供精准控制反馈

### 2. 智能语音反馈系统
- **多引擎支持**：兼容pyttsx3（离线）和gTTS（在线）语音引擎
- **丰富语音提示**：提供连接状态、飞行状态、手势识别、系统状态等多种语音反馈
- **智能语音队列**：避免语音重叠，支持优先级播放和即时播放
- **中文语音优化**：自动检测并优先使用中文语音引擎

### 3. 全方位性能监控与可视化
- **实时性能监控**：帧率（FPS）、CPU / 内存 / GPU 使用率、手势识别延迟、系统响应时间
- **性能可视化**：支持图表（FPS/CPU/ 内存 / 识别时间曲线）和仪表盘（实时数值 + 状态指示）两种模式
- **异常检测**：自动识别 FPS 骤降、CPU 飙升、内存泄漏等问题，触发语音告警
- **日志记录导出**：支持 CSV 格式性能日志和异常日志导出，便于离线分析

### 4. 多模式性能优化
- **三种性能模式**：
    - **最快模式**：性能优先，降低识别精度换取更高帧率
    - **平衡模式**：平衡性能与精度，适用于大多数场景
    - **最准模式**：精度优先，提供最准确的手势识别
- **动态参数调整**：根据不同模式自动调整检测间隔、图像缩放等参数

### 5. 复杂飞行模式控制
- **模拟与真实控制**：支持AirSim模拟器和真实无人机控制
- **基础控制**：起飞、降落、悬停、返航、高度调整（增加 / 降低 / 自定义）
- **轨迹飞行**：方形轨迹、圆形盘旋、8 字形飞行，支持自动完成和悬停收尾
- **安全机制**：控制间隔限制、置信度阈值过滤、紧急停止降落功能
- **连接管理**：自动检测AirSim连接状态，支持模拟模式

### 6. 手势轨迹记录与回放
- **轨迹录制**：实时记录手势轨迹，支持保存到文件
- **轨迹回放**：加载并回放录制的手势轨迹
- **轨迹可视化**：在视频画面上实时显示手势轨迹
- **轨迹管理**：支持开始/停止录制、保存/加载轨迹、暂停/继续回放

### 7. 高级用户界面
- **中文界面**：完整的中文用户界面，包括状态栏、帮助栏和警告信息
- **多显示模式**：支持普通、详细和最小化三种显示模式
- **性能图表**：实时显示FPS性能图表
- **调试信息**：可选的详细调试信息显示

### 8. 中文 UI 与调试工具
- **多显示模式**：普通（核心信息）、详细（含调试参数）、最小化（精简界面）
- **状态可视化**：手势置信度、稳定性评分、飞行模式、性能状态、录制状态等实时展示
- **调试功能**：手势历史记录、手部轮廓 / 指尖 / 掌心标记、参数校准日志

## 环境依赖


```bash
# 基础库
pip install opencv-python>=4.5.0
pip install numpy>=1.19.0
pip install Pillow>=8.0.0

# 可选但推荐
pip install psutil>=5.8.0  # 系统资源监控

# AirSim无人机控制（可选）
pip install airsim
pip install msgpack-rpc-python>=0.4.0  # AirSim依赖

# 语音反馈系统（选择安装）
pip install pyttsx3>=2.90                    # 离线语音（推荐）
pip install gtts>=2.2.0
pip install pygame>=2.0.0               # 在线语音（需要网络）

# 完整安装（推荐）
pip install -r requirements.txt
